<!doctype html>
<html>
<head>
  <title>Geolocation Example</title>
</head>
<body>
  <main>
    <label for="long">Longitude</label>
    <input type="text" id="long" name="long" />

    <label for="lat">Latitude</label>
    <input type="text" id="lat" name="lat" />

    <label for="acc">Accuracy</label>
    <input type="text" id="acc" name="acc" />

    <label for="alt">Altitude</label>
    <input type="text" id="alt" name="alt" />

    <label for="altAcc">Altitude Accuracy</label>
    <input type="text" id="altAcc" name="altAcc" />

    <label for="heading">Heading</label>
    <input type="text" id="heading" name="heading" />

    <label for="speed">Speed</label>
    <input type="text" id="speed" name="speed" />

    <label for="timestamp">Timestamp</label>
    <input type="text" id="timestamp" name="timestamp" />

    <input type="button" id="get-location-button" value="Get Location" />
    <input type="button" id="watch-location-button" value="Watch Location" />
    <input type="button" id="stop-watching-location-button" value="Stop Watching Location" />
  </main>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script>
    $(document).ready(function() {
      var watchId;

      $("#get-location-button").click(function() {
        var options = {
          enableHighAccuracy: true,
          maxAge: 10000,
          timeout: 10000
        }

        navigator.geolocation.getCurrentPosition(showPosition, positionError, options);
      });

      $("#watch-location-button").click(function() {
        watchId = navigator.geolocation.watchPosition(showPosition, positionError);
        console.log("Watching location");
      });

      $("#stop-watching-location-button").click(function() {
        navigator.geolocation.clearWatch(watchId);
        console.log("Stopped watching location");
      });

      function showPosition(position) {
        var coords = position.coords;

        // Longitude & latitude is expressed as decimals
        // These values are guaranteed to be returned
        $("#long").val(coords.longitude);
        $("#lat").val(coords.latitude);

        // Value in meters of actualy location with 95% accuracy
        $("#acc").val(coords.accuracy);

        // Height of device in meters
        $("#alt").val(coords.altitude);

        // Accuracy of altitude in meters
        $("#altAcc").val(coords.altitudeAccuracy);

        // Direction heading towards in degrees relative to true north
        $("#heading").val(coords.heading);

        // Ground speed in meters per sec
        $("#speed").val(coords.speed);

        // Date & time that coords were calculated
        $("timestamp").val(coords.timestamp);
      }

      function positionError(error) {
        switch(error.code) {
          case 0: console.log("Unknown error");
            break;
          case 1: console.log("User chose to not share location");
            break;
          case 2: console.log("Unable to determine location");
            break;
          case 3: console.log("Request to determine location timed out");
            break;
        }
      }

    });
  </script>
</body>
</html>
